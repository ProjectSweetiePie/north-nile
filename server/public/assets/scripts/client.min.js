/*! north-nile 2016-05-22 */
var app=angular.module("northApp",["ngRoute","leaflet-directive","ngMaterial","ngMessages","ngAnimate"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/views/home.html",controller:"HomeController",controllerAs:"hc"}).when("/map",{templateUrl:"/views/map.html",controller:"MapController",controllerAs:"mc"}),b.html5Mode(!0)}]),app.controller("MapController",["$scope","leafletData",function(a,b){var c=this;c.count=0,c.storedMarkers={m1:{lat:44.996121,lng:-93.295845,title:"Mr. Books Bruschetta Machine",type:"one"},m2:{lat:44.998995,lng:-93.291068,title:"Ms. Kitchens Oblique Reference Parlor",type:"two"},m3:{lat:44.999143,lng:-93.297133,title:"Mr. Bones Bruschetta Machine",type:"one"},m4:{lat:45.002572,lng:-93.289515,title:"Ms. Burbakers Oblique Reference Parlor",type:"two"}},c.visibleMarkers={},c.filterMarkers=function(a){if(console.log("filtering by:",b.getMarkers()),"all"===a)c.visibleMarkers=c.storedMarkers;else{c.visibleMarkers={};for(marker in c.storedMarkers)console.log("marker.type type",c.storedMarkers[marker].type,a),c.storedMarkers[marker].type===a&&(c.visibleMarkers["m"+c.count]=c.storedMarkers[marker],c.count++);console.log("visible markers:",c.visibleMarkers)}angular.extend(c,{markers:c.visibleMarkers})},angular.extend(c,{defaults:{scrollWheelZoom:!1,touchZoom:!0,dragging:!0},center:{lat:44.996121,lng:-93.295845,zoom:15},tiles:{url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},markers:c.visibleMarkers}),a.$on("leafletDirectiveMarker.map.click",function(a,b){console.log("clicked a marker:",b,"|event:",a),c.showInfoDrawer=!0,c.markerTitle=b.model.title}),c.emptyMarkers=function(){c.visibleMarkers={},a.$apply()},c.fillMarkers=function(){c.visibleMarkers=[m1={lat:44.996121,lng:-93.295845,title:"Mr. Books Bruschetta Machine",type:"one"},m2={lat:44.998995,lng:-93.291068,title:"Ms. Kitchens Oblique Reference Parlor",type:"two"},m3={lat:44.999143,lng:-93.297133,title:"Mr. Bones Bruschetta Machine",type:"one"},m4={lat:45.002572,lng:-93.289515,title:"Ms. Burbakers Oblique Reference Parlor",type:"two"}]},c.filterMarkers("all"),console.log("Map controller loaded.")}]),app.controller("HomeController",["$http",function(a){var b=this;b.loginInfo={},b.registerInfo={},b.loginShow=function(){b.loginForm=!0,b.registerForm=!1},b.registerShow=function(){console.log("hit registerShow"),b.registerForm=!0,b.loginForm=!1},b.loginUser=function(){a.post("/login",b.loginInfo).then(function(a){200==a.status&&(console.log("successful login",a.data.isAdmin),1==a.data.isAdmin?(console.log("admin is true"),b.adminDashboard=!0,b.userDashboard=!1,b.registerForm=!1,b.loginForm=!1):(console.log("admin is not true"),b.userDashboard=!0,b.adminDashboard=!1,b.registerForm=!1,b.loginForm=!1))},function(a){console.log("unsuccessful login")})},b.registerUser=function(){a.post("/register",b.registerInfo).then(function(a){200==a.status&&console.log("successful registration")},function(a){console.log("unsuccessful registration")})},console.log("Home controller loaded.")}]);